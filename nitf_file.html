
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>NITF File &#8212; pynitf 0.62 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="NITF File Differences" href="nitf_diff.html" />
    <link rel="prev" title="Software Design" href="design.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="nitf-file">
<h1>NITF File<a class="headerlink" href="#nitf-file" title="Permalink to this headline">¶</a></h1>
<p>We want to be able to read an write NITF files.</p>
<p>The NitfFile class structure is shown in <a class="reference internal" href="#id1"><span class="std std-numref">Fig. 4</span></a>.</p>
<div class="figure align-default" id="id2">
<span id="id1"></span><p class="plantuml">
<img src="_images/plantuml-8cda26949bad78fa10a09846bc3c682903521640.png" alt="class NitfFile {
   NitfFile(file_name=None,\n         security = security_unclassified,\n         use_raw=False)
   read(file_name, use_raw=False)
   write(file_name)
   NitfFileHeader file_header
   file_name
   NitfImageSegment image_segment[]
   NitfGraphicSegment graphic_segment[]
   NitfTextSegment text_segment[]
   NitfDesSegment des_segment[]
   NitfResSegment res_segment[]
   Tre tre_list[]
   security
}
note top
   The NITF file class, used for reading
   and writing a NITF file
end note

abstract class NitfSegment {
   +NitfFile nitf_file
   +subheader
   +user_subheader
   +Tre tre_list[]
   +data
}
note top
   Base class of NITF segments.

   Note not all segment types can have
   user_header or TREs. Just to prevent needing
   special handling for each segment type, we
   include this in all segment types but set to
   None (for user_subheader) or an empty list (for
   TREs) if the particular segment type doesn't
   support that.
end note

class NitfImageSegment {
   +Tre tre_list[]
}

class NitfGraphicSegment {
   +Tre tre_list[]
}

class NitfTextSegment {
   +Tre tre_list[]
}

class NitfDesSegment {
    +user_subheader
}

class NitfResSegment {
    +user_subheader
}

class Tre

NitfSegment &lt;|.. NitfImageSegment
NitfSegment &lt;|.. NitfGraphicSegment
NitfSegment &lt;|.. NitfTextSegment
NitfSegment &lt;|.. NitfDesSegment
NitfSegment &lt;|.. NitfResSegment
NitfFile o-- &quot;many&quot; NitfImageSegment
NitfFile o-- &quot;many&quot; NitfGraphicSegment
NitfFile o-- &quot;many&quot; NitfTextSegment
NitfFile o-- &quot;many&quot; NitfDesSegment
NitfFile o-- &quot;many&quot; NitfResSegment
NitfFile &quot;file level&quot; o-- &quot;many&quot; Tre
NitfImageSegment o-- &quot;many&quot; Tre
NitfTextSegment o-- &quot;many&quot; Tre
NitfGraphicSegment o-- &quot;many&quot; Tre"/>
</p>
<p class="caption"><span class="caption-number">Fig. 4 </span><span class="caption-text">NitfFile class structure</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Note that only NitfFile, NitfImageSegment, NitfTextSegment and
NitfGraphicSegment can have TREs. NitfResSegment and NitfDesSegment can not.
However, NitfResSegment
and NitfDesSegment can have a “user_subheader” supplied. The particular fields
in a user_subheader are determined by the desid or resid type identifier.</p>
<div class="section" id="nitffile-handles-and-hooks">
<h2>NitfFile Handles and Hooks<a class="headerlink" href="#nitffile-handles-and-hooks" title="Permalink to this headline">¶</a></h2>
<p>In addition to the NitfSegment, NitfFile contains several handle and hooks,
shown in <a class="reference internal" href="#nitf-file-hook"><span class="std std-numref">Fig. 5</span></a>.</p>
<div class="figure align-default" id="id3">
<span id="nitf-file-hook"></span><p class="plantuml">
<img src="_images/plantuml-0b1f0f02467f0492887db777cefae59ad42c3cff.png" alt="class NitfFile {
   NitfSegmentHookSet segment_hook_set
   NitfSegmentUserSubheaderHandleSet user_subheader_handle_set
   NitfSegmentDataHandleSet data_handle_set
}

class NitfSegmentHookSet {
   +add_hook(h)
   +discard_hook(h)
   {static} add_default_hook(cls, h)
   {static} discard_default_hook(cls, h)
   {static} default_hook_set()
   }
note top
  Hook objects to extend the handling
  of various attributes of a segments
  (e.g., add higher level classes Rpc
  or RSM).
end note

class NitfSegmentUserSubheaderHandleSet {
   +DesUserSubheaderHandleSet des_set
   +ResUserSubheaderHandleSet res_set
}
note bottom
   Handle reading and writing User
   Subheaders for various segments.
end note

class NitfSegmentDataHandleSet {
  +NitfImageHandleSet image_handle_set
  +NitfDesHandleSet des_handle_set
  +NitfTextHandleSet text_handle_set
  +NitfGraphicHandleSet graphic_handle_set
  +NitfResHandleSet res_handle_set
}
note top
   Handle reading and writing the
   data in a segment (e.g, a image)
end note

NitfFile o--  NitfSegmentHookSet
NitfFile o--  NitfSegmentUserSubheaderHandleSet
NitfFile o--  NitfSegmentDataHandleSet"/>
</p>
<p class="caption"><span class="caption-number">Fig. 5 </span><span class="caption-text">NitfFile class Handles and Hooks</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="nitfsegmenthookset">
<h2>NitfSegmentHookSet<a class="headerlink" href="#nitfsegmenthookset" title="Permalink to this headline">¶</a></h2>
<p>The NitfSegmentHookSet is used to extend the handling of various
attributes of a segment. The hooks are pretty general, and can be
used for whatever is desired. But the original use case was adding
higher level objects to NitfSegments such as RPC and RSM (done in
the separate GeoCal library).</p>
<p>The current set of higher level objects are:</p>
<table class="docutils align-default" id="id4">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Higher level objects handled by various NitfSegmentHook</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 27%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Segment Attribute</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>rpc</p></td>
<td><p>In GeoCal (not pynitf). This is a RPC (Rational
Polynomial Coefficient. This is a common
technique, and there are numerous references.
One reference is Fraser, CS, Dial, G, Grodecki, J
“Sensor orientation via RPCs” ISPRS J PHOTOGRAMM
60 (3): 182-194 MAY 2006.</p></td>
</tr>
<tr class="row-odd"><td><p>rsm</p></td>
<td><p>In GeoCal (not pynitf). This is a RSM (Replacement
Sensor Model), see Dolloff, J.T., M.M. Iiyama,
and C.R. Taylor, 2008. The Replacement Sensor
Model (RSM): Overview, Status, and Performance
Summary, ASPRS 2008 Annual Conference, April 28 -
May 2, 2008</p></td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="#nitf-segment-hook"><span class="std std-numref">Fig. 6</span></a>.</p>
<div class="figure align-default" id="id5">
<span id="nitf-segment-hook"></span><p class="plantuml">
<img src="_images/plantuml-98dd74fbef8411f73681e776c41498e607dfcd49.png" alt="class NitfFile {
   NitfSegmentHookSet segment_hook_set
}

class NitfSegmentHookSet {
   +after_init_hook(seg, nitf_file)
   +before_write_hook(seg, nitf_file)
   +after_read_hook(seg, nitf_file)
   +before_str_hook(seg, nitf_file, fh)
   +before_str_tre_hook(seg, tre, nitf_file, fh)
   +add_hook(h)
   +discard_hook(h)
   {static} add_default_hook(cls, h)
   {static} discard_default_hook(cls, h)
   {static} default_hook_set()
   }
note top
  Set of all the hook objects we use
  for a NitfFile.
end note

class NitfSegmentHook {
   +after_init_hook(seg, nitf_file)
   +before_write_hook(seg, nitf_file)
   +after_read_hook(seg, nitf_file)
   +before_str_hook(seg, nitf_file, fh)
   +before_str_tre_hook(seg, tre, nitf_file, fh)
   +remove_for_raw_print()
}
note bottom
   Hook object to extend handling of
   various attributes of a NitfSegment.
end note

NitfFile o--  NitfSegmentHookSet
NitfSegmentHookSet o-- &quot;many&quot; NitfSegmentHook"/>
</p>
<p class="caption"><span class="caption-number">Fig. 6 </span><span class="caption-text">NitfSegmentHookSet</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>We call all the NitfSegmentHook objects at several points in the processing:</p>
<ul class="simple">
<li><p>After NitfSegment.__init__ is called for a segment. This might do something
like add a new attribute to the newly created segment (e.g., add “rpc”)</p></li>
<li><p>Before writing a NitfSegment to a file. This might translate a higher
level object into TREs (e.g., for a RSM object).</p></li>
<li><p>After reading a NitfSegment. This might create a object based on TREs
(e.g., RSM based on various RSM Tres). Note this actually gets called
after the entire file has been read, so if the objects depend on other
later segments they are available (e.g., the orbit DESs for a
GLAS/GFM object on a image segment)</p></li>
<li><p>Before calling __str__ on a NitfSegment. This can be used to write out
a higher level object (e.g., RPC, RSM).</p></li>
<li><p>Before calling __str__ on a TRE. This can write a replacement text. Should
return “True” if the TRE printing has been done by this function, “False”
if the normal TRE printing should be done instead.</p></li>
</ul>
<p>Note that when printing out a NitfSegment, most of the time we want the higher
level objects printed. However, there may be instances where we want the “raw”
data (e.g., nitfinfofull reporting raw TRE data). NitfSegmentHookSet will
skip calling before_str_hook and before_tre_str_hook if
“remove_for_raw_print” is True for the NitfSegmentHook.</p>
</div>
<div class="section" id="nitfsegmentusersubheaderhandleset">
<h2>NitfSegmentUserSubheaderHandleSet<a class="headerlink" href="#nitfsegmentusersubheaderhandleset" title="Permalink to this headline">¶</a></h2>
<p>The NitfSegmentUserSubheaderHandleSet is used to handle reading and writing
the user subheaders found in the NitfDesSegment and NitfResSegment. This
contains a PriorityHandleSet (see <a class="reference internal" href="design.html#priority-handle-set-section"><span class="std std-ref">Priority Handle Set</span></a>) for
handling each of these segment types. See <a class="reference internal" href="#nitf-user-subheader-handle"><span class="std std-numref">Fig. 7</span></a>.</p>
<div class="figure align-default" id="id6">
<span id="nitf-user-subheader-handle"></span><p class="plantuml">
<img src="_images/plantuml-e419b6f8dba76c9a653e02cd72ec80151d9cb614.png" alt="class NitfFile {
   NitfSegmentHookSet segment_hook_set
   NitfSegmentUserSubheaderHandleSet user_subheader_handle_set
   NitfSegmentDataHandleSet data_handle_set
}

class NitfSegmentHookSet {
   +add_hook(h)
   +discard_hook(h)
   {static} add_default_hook(cls, h)
   {static} discard_default_hook(cls, h)
   {static} default_hook_set()
   }
note top
  Hook objects to extend the handling
  of various attributes of a segments
  (e.g., add higher level classes Rpc
  or RSM).
end note

class NitfSegmentHook

class NitfSegmentUserSubheaderHandleSet {
   +DesUserSubheaderHandleSet des_set
   +ResUserSubheaderHandleSet res_set
}
note bottom
   Handle reading and writing User
   Subheaders for various segments.
end note

class PriorityHandleSet

class DesUserSubheaderHandleSet

class ResUserSubheaderHandleSet

class NitfSegmentDataHandleSet {
  +NitfImageHandleSet image_handle_set
  +NitfDesHandleSet des_handle_set
  +NitfTextHandleSet text_handle_set
  +NitfGraphicHandleSet graphic_handle_set
  +NitfResHandleSet res_handle_set
}
note top
   Handle reading and writing the
   data in a segment (e.g, a image)
end note

class NitfImageHandleSet
class NitfDesHandleSet
class NitfTextHandleSet
class NitfGraphicHandleSet
class NitfResHandleSet

NitfFile o--  NitfSegmentHookSet
NitfFile o--  NitfSegmentUserSubheaderHandleSet
NitfFile o--  NitfSegmentDataHandleSet
NitfSegmentHookSet o-- &quot;many&quot; NitfSegmentHook
NitfSegmentUserSubheaderHandleSet o-- &quot;many&quot; DesUserSubheaderHandleSet
NitfSegmentUserSubheaderHandleSet o-- &quot;many&quot; ResUserSubheaderHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfImageHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfDesHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfTextHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfGraphicHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfResHandleSet
NitfSegmentUserSubheaderHandleSet -[hidden]- PriorityHandleSet
NitfSegmentDataHandleSet -[hidden]- PriorityHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfImageHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfDesHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfTextHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfGraphicHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfResHandleSet
PriorityHandleSet &lt;|-- DesUserSubheaderHandleSet
PriorityHandleSet &lt;|-- ResUserSubheaderHandleSet
PriorityHandleSet &lt;|-- NitfImageHandleSet
PriorityHandleSet &lt;|-- NitfDesHandleSet
PriorityHandleSet &lt;|-- NitfTextHandleSet
PriorityHandleSet &lt;|-- NitfGraphicHandleSet
PriorityHandleSet &lt;|-- NitfResHandleSet"/>
</p>
<p class="caption"><span class="caption-number">Fig. 7 </span><span class="caption-text">NitfSegmentUserSubheaderHandleSet</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="nitfsegmentdatahandleset">
<h2>NitfSegmentDataHandleSet<a class="headerlink" href="#nitfsegmentdatahandleset" title="Permalink to this headline">¶</a></h2>
<p>The NitfSegmentDataHandleSet is used to handle reading and writing
the data field of each of the NitfSegment types. This
contains a PriorityHandleSet (see <a class="reference internal" href="design.html#priority-handle-set-section"><span class="std std-ref">Priority Handle Set</span></a>) for
handling
each of these segment types. See <a class="reference internal" href="#nitf-data-handle"><span class="std std-numref">Fig. 8</span></a>.</p>
<div class="figure align-default" id="id7">
<span id="nitf-data-handle"></span><p class="plantuml">
<img src="_images/plantuml-e419b6f8dba76c9a653e02cd72ec80151d9cb614.png" alt="class NitfFile {
   NitfSegmentHookSet segment_hook_set
   NitfSegmentUserSubheaderHandleSet user_subheader_handle_set
   NitfSegmentDataHandleSet data_handle_set
}

class NitfSegmentHookSet {
   +add_hook(h)
   +discard_hook(h)
   {static} add_default_hook(cls, h)
   {static} discard_default_hook(cls, h)
   {static} default_hook_set()
   }
note top
  Hook objects to extend the handling
  of various attributes of a segments
  (e.g., add higher level classes Rpc
  or RSM).
end note

class NitfSegmentHook

class NitfSegmentUserSubheaderHandleSet {
   +DesUserSubheaderHandleSet des_set
   +ResUserSubheaderHandleSet res_set
}
note bottom
   Handle reading and writing User
   Subheaders for various segments.
end note

class PriorityHandleSet

class DesUserSubheaderHandleSet

class ResUserSubheaderHandleSet

class NitfSegmentDataHandleSet {
  +NitfImageHandleSet image_handle_set
  +NitfDesHandleSet des_handle_set
  +NitfTextHandleSet text_handle_set
  +NitfGraphicHandleSet graphic_handle_set
  +NitfResHandleSet res_handle_set
}
note top
   Handle reading and writing the
   data in a segment (e.g, a image)
end note

class NitfImageHandleSet
class NitfDesHandleSet
class NitfTextHandleSet
class NitfGraphicHandleSet
class NitfResHandleSet

NitfFile o--  NitfSegmentHookSet
NitfFile o--  NitfSegmentUserSubheaderHandleSet
NitfFile o--  NitfSegmentDataHandleSet
NitfSegmentHookSet o-- &quot;many&quot; NitfSegmentHook
NitfSegmentUserSubheaderHandleSet o-- &quot;many&quot; DesUserSubheaderHandleSet
NitfSegmentUserSubheaderHandleSet o-- &quot;many&quot; ResUserSubheaderHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfImageHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfDesHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfTextHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfGraphicHandleSet
NitfSegmentDataHandleSet o-- &quot;many&quot; NitfResHandleSet
NitfSegmentUserSubheaderHandleSet -[hidden]- PriorityHandleSet
NitfSegmentDataHandleSet -[hidden]- PriorityHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfImageHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfDesHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfTextHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfGraphicHandleSet
DesUserSubheaderHandleSet -[hidden]- NitfResHandleSet
PriorityHandleSet &lt;|-- DesUserSubheaderHandleSet
PriorityHandleSet &lt;|-- ResUserSubheaderHandleSet
PriorityHandleSet &lt;|-- NitfImageHandleSet
PriorityHandleSet &lt;|-- NitfDesHandleSet
PriorityHandleSet &lt;|-- NitfTextHandleSet
PriorityHandleSet &lt;|-- NitfGraphicHandleSet
PriorityHandleSet &lt;|-- NitfResHandleSet"/>
</p>
<p class="caption"><span class="caption-number">Fig. 8 </span><span class="caption-text">NitfSegmentDataHandleSet</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="nitffile-convenience-functions">
<h2>NitfFile convenience functions<a class="headerlink" href="#nitffile-convenience-functions" title="Permalink to this headline">¶</a></h2>
<p>While the individual lists can be filters/searched using normal python
functions, there are a set of things done frequently enough that it is
useful to add convenience functions to do them. These are shown in
in <a class="reference internal" href="#nitf-file-convenience"><span class="std std-numref">Fig. 9</span></a>.</p>
<div class="figure align-default" id="id8">
<span id="nitf-file-convenience"></span><p class="plantuml">
<img src="_images/plantuml-1d0ee82387e73292dc0e7b8d8a73b2779b460676.png" alt="class NitfFile {
   iseg_by_idlv(idlvl)
   iseg_by_iid1(iid1)
   iseg_by_iid1_single(iid1)
}"/>
</p>
<p class="caption"><span class="caption-number">Fig. 9 </span><span class="caption-text">NitfFile Convenience Functions</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pynitf</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Software Design</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NITF File</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#nitffile-handles-and-hooks">NitfFile Handles and Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nitfsegmenthookset">NitfSegmentHookSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nitfsegmentusersubheaderhandleset">NitfSegmentUserSubheaderHandleSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nitfsegmentdatahandleset">NitfSegmentDataHandleSet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nitffile-convenience-functions">NitfFile convenience functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nitf_diff.html">NITF File Differences</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="design.html" title="previous chapter">Software Design</a></li>
      <li>Next: <a href="nitf_diff.html" title="next chapter">NITF File Differences</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Mike Smyth, Philip Yoon, Walt Bunch.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/nitf_file.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>